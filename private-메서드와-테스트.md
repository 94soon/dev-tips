# private 메서드와 테스트

테스트 코드를 작성하다보면 테스트 하고 싶은 로직이 private 메서드 안에 담겨 있어서 답답할 때가 있다. private 메서드는 외부에서 직접 호출할 수 없으므로 일반적인 방법으로는 직접 테스트할 수 없기 때문이다.

이럴 때 어떻게 해야할까? PowerMock 같은 도구를 써서 기어코 private 메서드를 직접 테스트 해야할까?


## private 메서드란?

보통 '외부에는 공개되지 않아 외부에서 직접 호출할 수 없고 메서드가 속한 객체 내부에서만 호출 가능한 메서드'를 private 메서드라고 한다.

외부에 공개하지 않는 이유는 공개되면 결합도를 높이고 유지보수성을 떨어뜨리며 시간이 갈 수록 시스템의 전체적인 유연성이 크게 저하되기 때문이다.

결국 **private 메서드란 객체의 책임을 완수하는 데 필요한 구체적인 로직의 일부를 담당하며 객체 내에 적절히 재배치된 메서드다.** 외부에 공개되지 않으므로 구체적인 로직을 변경해도 외부에 영향을 미치지 않는다.


## 진짜와 가짜

그런데 외부에 공개되지 않도록 `private`이 붙어있다고 해서 다 같은 private 메서드가 아니다.

어떤 놈은 잘 설계된 로직의 일부를 담당하며 적절히 재배치 된 진짜 private 메서드고,  
어떤 놈은 잘못 설계되어 잘못 배치된 가짜 private 메서드다.

**가짜 private 메서드는 실은 다른 클래스의 public 메서드인데 자기 스스로도 자기 정체를 모른다.**  
그래서 개발자가 찾아서 본래의 보습인 다른 클래스의 public 메서드로 돌려놔야 한다.

private 일 때는 간접적으로 테스트 될 수 밖에 없지만,  
public 이 되면 직접 테스트가 가능하다.  
물론 같은 클래스에서든 다른 클래스에서든  
오직 직접 테스트만을 위해 public 으로 바꿔서는 안 되겠지만,  
그렇게 해서라도 직접 테스트하고 싶은 마음이 들 정도로 중요한 책임을 가지고 있다면 그놈은 가짜 private 일 가능성이 높다.

## 그래서 어쩌라고?

private 메서드를 테스트하고 싶은 마음이 들면,  
PowerMock 같은 도구로 테스트를 할 게 아니라,  
별도의 클래스로 분리하고,  
그 클래스의 public 메서드로 만든 후에,  
public 메서드로서 테스트해야 한다.
